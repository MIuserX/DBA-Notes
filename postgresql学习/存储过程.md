# 头脑风暴

## 使用历史

* 传统金融等公司使用存储过程比较多
* MySQL 兴起后，由于对存储过程支持的弱，所以存储过程的使用减少
* 互联网兴起分库分表，不利于



## 优点

* 减少了业务系统与数据库的交互（网络传输）
* 作为应用和DB之间的层，达到DB与应用的松耦合，数据库结构变动，应用无需大的改动



## 缺点

* 不方便异构数据库之间移植
* 消耗数据库资源
* 运维调试难度大



## 使用场景

* 批量计算，返回值少
* 计算逻辑复杂
* 业务稳定，不怎么变化，这样存储过程也会稳定
* OLAP
* 工具函数（例如：高德 84 坐标互转）
* 业务无关的逻辑（像报表）



## 评估因素

* **项目本身**

    * 如果业务变化很快，那么用存储过程就不太合适

* **人员配置**

    需要掌握存储过程知识的技术人员。

    * 数据库开发人员的配置

* **历史技术栈**

* **团队技术习惯**

* **可维护性**



## 现状

已存在的系统，还有大量的存储过程存在，需要维护，而且有的还在 SHI 山上继续堆 SHI。



## 新的趋势





## 观点

#### 系统的分层开发

比如前后端分离、MVC。分层开发是技术开发的趋势。但分层开发涉及到业务逻辑分配的问题。







# 我的思考

* 存在即合理

    历史上存在且辉煌过，证明存储过程在那个时期是比较好的东西。现在的没落，应该归结于新的更好的技术的出现。

* 但未来很长一段时间内，还不会退出历史舞台

    目前 DB2、Oracle、SQL Server、MySQL、PostgreSQL 等还在很多地方被使用，存储过程还有存在价值，还要掌握。

* 使用可以，但是要控制量

    控制存储过程总数量，控制单个存储过程代码量。